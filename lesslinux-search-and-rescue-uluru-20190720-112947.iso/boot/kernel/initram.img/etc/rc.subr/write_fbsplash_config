#!/static/bin/ash

PATH=/static/bin:/static/sbin:/bin:/sbin:/usr/bin:/usr/sbin
export PATH

width=$1
height=$2

# Default logo is 174x106 pixels, pgbar 24px under logo and 10px high
# pgbar 90% of screen width, everything centered

pgbar_offset_x=` expr ${width} / 20 `
img_offset_x=` expr ${width} / 2 - 87 `
img_offset_y=` expr ${height} / 2 - 65 `
pgbar_offset_y=` expr ${img_offset_y} + 130 `
pgbar_width=` expr ${width} - 2 '*' ${pgbar_offset_x} ` 

# Show an icon beneath the bar
icon_offset_x=` expr ${width} / 2 - 32 ` 
icon_offset_y=` expr ${pgbar_offset_y} + 34 ` 

# In some scripts you want to show a text message which is larger 
# than the icons, see for example the USB conversion script
# text_offset_x=` expr ${width} / 2 - 200 ` 
text_offset_x=$pgbar_offset_x
# text_offset_y=` expr ${pgbar_offset_y} + 20 ` 
text_offset_y=` expr ${height} - 150 ` 

# Config file for main logo

cat << EOF > /etc/lesslinux/fbsplash.cfg
#  Generated by /etc/rc.subr/write_fbsplash_config
BAR_LEFT=${pgbar_offset_x}
BAR_TOP=${pgbar_offset_y}
BAR_WIDTH=${pgbar_width}
BAR_HEIGHT=12
BAR_R=0
BAR_G=254
BAR_B=0
# Image position
IMG_LEFT=${img_offset_x}
IMG_TOP=${img_offset_y}
# Black background
BG_R=0
BG_G=0
BG_B=0
NOFILL=0
EOF

# Config file for icons below progress bar
cat << EOF > /etc/lesslinux/fbsplash_icon.cfg
#  Generated by /etc/rc.subr/write_fbsplash_config
# Image position
IMG_LEFT=${icon_offset_x}
IMG_TOP=${icon_offset_y}
# Do not repaint the BG
NOFILL=1
EOF

# Config file for text below progress bar
cat << EOF > /etc/lesslinux/fbsplash_text.cfg
#  Generated by /etc/rc.subr/write_fbsplash_config
# Image position
IMG_LEFT=${text_offset_x}
IMG_TOP=${text_offset_y}
# Do not repaint the BG
NOFILL=1
EOF

#		
